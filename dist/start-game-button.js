(()=>{var d=Object.defineProperty;var g=(h,t)=>d(h,"name",{value:t,configurable:!0});const r=class r extends CustomModule{constructor(){super({name:"\u{1F3AE} Start Game Button",description:"Adds a button to the navigation menu to start VRChat with VRCX settings",authors:[{name:"Bluscream"}],tags:["Utility","Game","Button"],dependencies:["nav-menu-api"]}),this.navMenuApi=null}async load(){const t=window.customjs.types.SettingType;this.categories=this.defineSettingsCategories({launch:{name:"\u{1F3AE} Launch Settings",description:"Configure how VRChat is launched"}}),this.settings=this.defineSettings({confirmBeforeLaunch:{type:t.BOOLEAN,description:"Ask for confirmation before launching VRChat",default:!0,category:"launch"},desktopMode:{type:t.BOOLEAN,description:"Launch in Desktop Mode (--no-vr)",default:!1,category:"launch"},showNotifications:{type:t.BOOLEAN,description:"Show notifications when launching game",default:!0,category:"launch"}}),this.logger.log("Start Game Button ready"),this.loaded=!0}async start(){if(this.navMenuApi=await window.customjs.waitForModule("nav-menu-api"),!this.navMenuApi){this.logger.error("\u274C Nav Menu API plugin not found after waiting");return}this.navMenuApi.addItem("start-game",{label:"Start Game",icon:"ri-play-circle-line",onClick:()=>this.handleStartGame(),position:0}),this.enabled=!0,this.started=!0}async handleStartGame(){try{if(!window.AppApi?.StartGame){this.logger.showError("Cannot start game: AppApi not available");return}const t=await this.getConfigValue("launchArguments")||"",n=await this.getConfigValue("vrcLaunchPathOverride")||"",e=this.settings.store.desktopMode,a=[];t&&a.push(t),e&&a.push("--no-vr");const i=a.join(" ");if(this.settings.store.confirmBeforeLaunch){const u=e?"Desktop Mode":"VR Mode",l=n||"default location",c=i?`Arguments: ${i}`:"";if(!await this.showConfirmDialog(`Launch VRChat in ${u}?`,`Path: ${l}${c?`
`+c:""}`)){this.logger.log("Launch cancelled by user");return}}this.settings.store.showNotifications&&this.logger.showInfo("Starting VRChat...");let o;n?o=await window.AppApi.StartGameFromPath(n,i):o=await window.AppApi.StartGame(i),o?this.settings.store.showNotifications&&this.logger.showSuccess("VRChat launched"):this.logger.showError(n?"Failed to launch VRChat, invalid custom path set":"Failed to find VRChat, set a custom path in launch options")}catch(t){this.logger.showError(`Error starting game: ${t.message}`)}}async showConfirmDialog(t,n){try{const e=window.$app?.config?.globalProperties?.$confirm;if(e)try{return await e(n,t,{confirmButtonText:"Launch",cancelButtonText:"Cancel",type:"info"}),!0}catch{return!1}this.logger.log("Using native confirm dialog (Element Plus not available)");const a=`${t}

${n}`;return confirm(a)}catch(e){this.logger.warn(`Error showing confirm dialog: ${e.message}`);const a=`${t}

${n}`;return confirm(a)}}async getConfigValue(t){try{return window.configRepository?.getString?await window.configRepository.getString(t):window.AppApi?.GetConfigValue?await window.AppApi.GetConfigValue(t):(this.logger.warn(`Cannot read config value: ${t}`),null)}catch(n){return this.logger.warn(`Error reading config value ${t}:`,n),null}}async stop(){this.navMenuApi&&this.navMenuApi.removeItem("start-game"),await super.stop()}};g(r,"StartGameButtonPlugin");let s=r;window.customjs.__LAST_PLUGIN_CLASS__=s;})();
