(()=>{var d=Object.defineProperty;var c=(u,t)=>d(u,"name",{value:t,configurable:!0});const r=class r extends CustomModule{constructor(){super({name:"Start Game Button \u{1F3AE}",description:"Adds a button to the navigation menu to start VRChat with VRCX settings",authors:[{name:"Bluscream",description:"VRCX Plugin System Maintainer",userId:"usr_08082729-592d-4098-9a21-83c8dd37a844"}],tags:["Utility","Game","Button"],required_dependencies:["nav-menu-api"]}),this.navMenuApi=null}async load(){const t=window.customjs.types.SettingType;this.categories=this.defineSettingsCategories({launch:{name:"\u{1F3AE} Launch Settings",description:"Configure how VRChat is launched"}}),this.settings=this.defineSettings({confirmBeforeLaunch:{type:t.BOOLEAN,description:"Ask for confirmation before launching VRChat",default:!0,category:"launch"},desktopMode:{type:t.BOOLEAN,description:"Launch in Desktop Mode (--no-vr)",default:!1,category:"launch"},showNotifications:{type:t.BOOLEAN,description:"Show notifications when launching game",default:!0,category:"launch"}}),this.logger.log("Start Game Button ready"),this.loaded=!0}async start(){if(this.navMenuApi=await window.customjs.waitForModule("nav-menu-api"),!this.navMenuApi){this.logger.error("\u274C Nav Menu API plugin not found after waiting");return}this.navMenuApi.addItem("start-game",{label:"Start Game",icon:"ri-play-circle-line",onClick:()=>this.handleStartGame(),position:0}),this.enabled=!0,this.started=!0}async handleStartGame(){try{if(!window.AppApi?.StartGame){this.logger.showError("Cannot start game: AppApi not available");return}const t=await this.getConfigValue("launchArguments")||"",e=await this.getConfigValue("vrcLaunchPathOverride")||"",n=this.settings.store.desktopMode,i=[];t&&i.push(t),n&&i.push("--no-vr");const a=i.join(" ");if(this.settings.store.confirmBeforeLaunch){const g=n?"Desktop Mode":"VR Mode",l=e||"default location",h=a?`Arguments: ${a}`:"";if(!await this.showConfirmDialog(`Launch VRChat in ${g}?`,`Path: ${l}${h?`
`+h:""}`)){this.logger.log("Launch cancelled by user");return}}this.settings.store.showNotifications&&this.logger.showInfo("Starting VRChat...");let s;e?s=await window.AppApi.StartGameFromPath(e,a):s=await window.AppApi.StartGame(a),s?this.settings.store.showNotifications&&this.logger.showSuccess("VRChat launched"):this.logger.showError(e?"Failed to launch VRChat, invalid custom path set":"Failed to find VRChat, set a custom path in launch options")}catch(t){this.logger.showError(`Error starting game: ${t.message}`)}}async getConfigValue(t){try{return window.configRepository?.getString?await window.configRepository.getString(t):window.AppApi?.GetConfigValue?await window.AppApi.GetConfigValue(t):(this.logger.warn(`Cannot read config value: ${t}`),null)}catch(e){const n=e instanceof Error?e.message:String(e);return this.logger.warn(`Error reading config value ${t}: ${n}`),null}}async stop(){this.navMenuApi&&this.navMenuApi.removeItem("start-game"),await super.stop()}};c(r,"StartGameButtonPlugin");let o=r;window.customjs.__LAST_PLUGIN_CLASS__=o;})();
